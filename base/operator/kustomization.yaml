apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: platform-system

resources:
  # CRDs must be applied before operator deployment
  - crds/apps.example.com_identityservices.yaml
  - crds/apps.example.com_userservices.yaml
  - crds/apps.example.com_blogservices.yaml
  - crds/apps.example.com_frontends.yaml
  - crds/apps.example.com_webapps.yaml
  - crds/apps.example.com_kafkaclusters.yaml
  # Media processing service CRDs
  - crds/apps.example.com_mediaapiservices.yaml
  - crds/apps.example.com_imageworkers.yaml
  - crds/apps.example.com_videoworkers.yaml
  - crds/apps.example.com_audioworkers.yaml
  - crds/apps.example.com_documentworkers.yaml
  - crds/apps.example.com_archiveworkers.yaml
  - crds/apps.example.com_uploadservices.yaml
  # Operator deployment
  - namespace.yaml
  - service-account.yaml
  - role.yaml
  - role-binding.yaml
  - cluster-role.yaml
  - cluster-role-binding.yaml
  - deployment.yaml
