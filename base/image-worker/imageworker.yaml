apiVersion: apps.example.com/v1alpha1
kind: ImageWorker
metadata:
  name: image-worker
spec:
  serviceName: image-worker
  image: 939217651725.dkr.ecr.eu-west-2.amazonaws.com/kubeadm_ec2_cluster/image-worker:v16-5309900
  replicas: 1
  port: 3004
  serviceType: ClusterIP

  # S3 configuration
  s3:
    bucket: "media-assets"
    region: "eu-west-2"
    accessKeyId: "change-in-production"
    secretAccessKey: "change-in-production"
    forcePathStyle: false

  # Kafka configuration
  kafka:
    enabled: true
    brokers:
      - "platform-kafka-kafka-bootstrap.kafka:9092"
    consumerGroupId: "image-worker-group"
    topics:
      mediaImageProcessing: "media.image.processing"
      mediaAssetEvents: "media.asset.events"
      mediaProcessingStatus: "media.asset.processing.status"
