{
  "version": "1.0.0",
  "environment": "prod",
  "deployment": {
    "identity-service": {
      "syncWave": 0,
      "dependencies": ["postgres", "redis", "kafka"],
      "healthCheck": {
        "endpoint": "/health",
        "timeout": "10s",
        "interval": "30s",
        "failureThreshold": 3
      },
      "rollout": {
        "strategy": "rolling",
        "maxSurge": "25%",
        "maxUnavailable": "0%"
      },
      "rollback": {
        "automatic": true,
        "onHealthFailure": true,
        "historyLimit": 10
      },
      "canary": {
        "enabled": false,
        "steps": [10, 25, 50, 100],
        "analysisInterval": "5m"
      }
    },
    "user-service": {
      "syncWave": 1,
      "dependencies": ["postgres", "kafka", "identity-service"],
      "healthCheck": {
        "endpoint": "/profiles/health",
        "timeout": "10s",
        "interval": "30s",
        "failureThreshold": 3
      },
      "rollout": {
        "strategy": "rolling",
        "maxSurge": "25%",
        "maxUnavailable": "0%"
      },
      "rollback": {
        "automatic": true,
        "onHealthFailure": true,
        "historyLimit": 10
      }
    },
    "blog-service": {
      "syncWave": 1,
      "dependencies": ["postgres", "kafka"],
      "healthCheck": {
        "endpoint": "/api/v1/health",
        "timeout": "10s",
        "interval": "30s",
        "failureThreshold": 3
      },
      "rollout": {
        "strategy": "rolling",
        "maxSurge": "25%",
        "maxUnavailable": "0%"
      },
      "rollback": {
        "automatic": true,
        "onHealthFailure": true,
        "historyLimit": 10
      }
    },
    "frontend": {
      "syncWave": 2,
      "dependencies": ["identity-service", "user-service"],
      "healthCheck": {
        "endpoint": "/",
        "timeout": "5s",
        "interval": "30s",
        "failureThreshold": 3
      },
      "rollout": {
        "strategy": "rolling",
        "maxSurge": "25%",
        "maxUnavailable": "0%"
      }
    }
  },
  "scaling": {
    "identity-service": {
      "minReplicas": 1,
      "maxReplicas": 3,
      "targetCPU": 70,
      "scaleDownStabilization": "300s"
    },
    "user-service": {
      "minReplicas": 1,
      "maxReplicas": 3,
      "targetCPU": 70,
      "scaleDownStabilization": "300s"
    },
    "blog-service": {
      "minReplicas": 1,
      "maxReplicas": 3,
      "targetCPU": 70,
      "scaleDownStabilization": "300s"
    },
    "frontend": {
      "minReplicas": 1,
      "maxReplicas": 3,
      "targetCPU": 60,
      "scaleDownStabilization": "300s"
    }
  },
  "kafka": {
    "topics": {
      "identity.events": { "partitions": 6, "replicas": 3, "retention": "7d" },
      "user.events": { "partitions": 6, "replicas": 3, "retention": "7d" },
      "blog.events": { "partitions": 6, "replicas": 3, "retention": "7d" },
      "cicd.deployment-events": { "partitions": 3, "replicas": 3, "retention": "30d" },
      "cicd.deployment-status": { "partitions": 3, "replicas": 3, "retention": "30d" },
      "cicd.health-events": { "partitions": 3, "replicas": 3, "retention": "7d" },
      "platform-dlq": { "partitions": 3, "replicas": 3, "retention": "30d" }
    }
  },
  "eventHandlers": {
    "onDeploymentStart": ["notifySlack", "updateStatus", "logEvent"],
    "onDeploymentSuccess": ["notifySlack", "updateDashboard", "logEvent"],
    "onDeploymentFailure": ["notifyPagerDuty", "triggerRollback", "logToDLQ", "logEvent"]
  },
  "alerting": {
    "pagerduty": {
      "enabled": true,
      "severity": "critical"
    },
    "slack": {
      "enabled": true,
      "channel": "#platform-deployments"
    }
  },
  "debug": {
    "enabled": false,
    "verboseLogging": false
  }
}
